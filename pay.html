<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ì‚°í•˜ê¸°</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; text-align: center; padding: 20px; background-color: #f2f4f6; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-top: 50px; }
        .amount { font-size: 24px; font-weight: bold; color: #333; margin: 10px 0; }
        .account { color: #666; font-size: 14px; margin-bottom: 30px; background: #eee; padding: 10px; border-radius: 8px; display: inline-block;}
        
        .btn { width: 100%; padding: 15px 0; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; display: block; text-decoration: none; margin-bottom: 10px; }
        .btn-toss { background-color: #3182f6; color: white; }
        .btn-kakao { background-color: #ffeb00; color: #3c1e1e; }
    </style>
</head>
<body>
    <div class="container">
        <h3 style="margin:0;">ì •ì‚° ê¸ˆì•¡</h3>
        <div id="amount-display" class="amount">0ì›</div>
        <div id="account-display" class="account">ê³„ì¢Œ ì •ë³´ ë¡œë”©ì¤‘</div>

        <a id="toss-btn" href="#" class="btn btn-toss">í† ìŠ¤ë¡œ ë°”ë¡œ ì†¡ê¸ˆ âš¡</a>
        
        <div onclick="runKakaoPay()" class="btn btn-kakao">ì¹´ì¹´ì˜¤í˜ì´ë¡œ ì†¡ê¸ˆ ğŸŸ¡</div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const bank = params.get('bank');
        const account = params.get('acc');
        const amount = params.get('amt');
        const type = params.get('type');

        // í™”ë©´ í‘œì‹œ
        document.getElementById('amount-display').innerText = parseInt(amount || 0).toLocaleString() + "ì›";
        document.getElementById('account-display').innerText = (bank || "") + " " + (account || "");

        // í† ìŠ¤ ìŠ¤í‚´ ì„¤ì •
        const tossScheme = `supertoss://send?bank=${bank}&accountNo=${account}&amount=${amount}&origin=link`;
        document.getElementById('toss-btn').href = tossScheme;

        // [í•µì‹¬ ë¡œì§] ì¹´ì¹´ì˜¤í˜ì´ ì‹¤í–‰ í•¨ìˆ˜
        function runKakaoPay() {
            const textToCopy = bank + " " + account;
            
            // 1. ê³„ì¢Œë²ˆí˜¸ í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹œë„
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert("ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! (" + textToCopy + ")\nì•±ì´ ì—´ë¦¬ë©´ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.");
                launchKakaoApp();
            }).catch(err => {
                // ë³´ì•ˆìƒ ë³µì‚¬ ì‹¤íŒ¨í•˜ë©´ ì•Œë¦¼ì°½ì´ë¼ë„ ë„ì›Œì„œ ë³´ì—¬ì¤Œ
                prompt("ì´ ê³„ì¢Œë¥¼ ë³µì‚¬í•˜ì„¸ìš”:", textToCopy);
                launchKakaoApp();
            });
        }

        function launchKakaoApp() {
            // ì¹´ì¹´ì˜¤í˜ì´ ì•± ì‹¤í–‰ ì‹œë„ -> ì—†ìœ¼ë©´ ì¹´ì¹´ì˜¤í†¡ ì‹¤í–‰
            // location.hrefëŠ” í•˜ë‚˜ë§Œ ì‹¤í–‰ë˜ë¯€ë¡œ ì‹œê°„ì°¨ ê³µê²© ì‚¬ìš©
            
            setTimeout(function() {
                window.location.href = "kakaopay://"; // ì¹´ì¹´ì˜¤í˜ì´ ì•± ì‹¤í–‰ ìŠ¤í‚´
            }, 100);

            setTimeout(function() {
                 window.location.href = "kakaotalk://"; // ì¹´ì¹´ì˜¤í˜ì´ ì—†ìœ¼ë©´ ì¹´í†¡ì´ë¼ë„ ì¼œë¼
            }, 500);
        }
        
        // íŒ: ë§í¬ ë’¤ì— &type=copy ê°€ ë¶™ì–´ì„œ ë“¤ì–´ì™”ìœ¼ë©´ ë°”ë¡œ ì¹´ì¹´ì˜¤ ë¡œì§ ì‹¤í–‰
        if (type === 'copy') {
            // í˜ì´ì§€ ë¡œë”© ì§í›„ ë³µì‚¬ëŠ” ë¸Œë¼ìš°ì € ì •ì±…ìƒ ë§‰í ìˆ˜ ìˆì–´ì„œ ë²„íŠ¼ í´ë¦­ ìœ ë„ê°€ ì•ˆì „í•¨
            // í•˜ì§€ë§Œ ì‹œë„ëŠ” í•´ë³¼ ìˆ˜ ìˆìŒ
        }
    </script>
</body>
</html>
